//* This file will make me kill myself :3
/*
⠀⠀⠀⠀⠀⣤⣄⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⣸⣿⣿⣿⣶⣄⠀⠀⠀⠀⠀⠀⠀⢻⣷⣦⣄⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣤⣠⠄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⢀⣿⣿⣿⣿⣿⣿⣿⡀⠴⣾⣿⣿⣿⣤⣿⣿⣿⣿⣷⣦⣄⠀⠀⠀⠀⠀⠀⣀⣤⣾⣿⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⣼⣿⣿⣿⣿⣿⣿⣿⣿⣷⣤⡙⠿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣧⣀⠀⠀⣤⣾⣿⣿⣿⣿⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⣦⣼⣿⣿⣿⣿⣿⣿⣿⣿⣿⣾⣾⣿⣿⣿⣿⣿⣿⣿⣿⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢹⣿⢸⣿⣿⡏⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⢻⣿⣿⡿⠿⠟⠻⠿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣌⣃⣼⣿⡟⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⢀⣠⣤⣴⣿⣿⣍⣠⣶⣶⣶⣦⡈⢻⣿⣿⣿⣿⣿⣿⡿⠟⠋⠉⠋⠉⠛⢿⣿⣿⣿⣿⣿⠅⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠈⠛⠛⠛⣿⣿⣿⣿⣿⣿⣿⣿⣿⠾⠿⣿⣿⣿⣿⣿⣤⣴⣶⣿⣿⣷⣶⣀⢹⣿⣿⣤⣶⣶⡶⠂⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⣰⣯⣛⣉⢩⡟⠟⢿⣿⣿⣦⣠⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠟⠋⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⢰⠿⠿⠟⠳⣤⣶⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⢿⣿⣿⣿⣍⣀⡤⠀⠝⢉⣹⣿⣷⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠉⠻⠿⣿⣿⣦⣉⣡⣬⣙⣁⣼⣿⣿⣿⣿⣿⣿⣷⠾⠟⠻⢿⡿⣧⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⢉⣹⣿⣿⣿⣿⣿⣿⣿⣉⣉⣭⣍⣀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠻⠿⣷⣾⣿⣿⣿⣿⣿⣿⡿⠟⣓⣈⣅⣙⡿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣾⣿⣿⣿⣿⣿⡟⢋⣤⣴⣿⣿⣿⣿⣿⣿⣧⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠾⠿⢿⣿⣿⣿⠏⣴⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣾⣿⣿⣿⣦⠹⡇⣾⣿⣧⢹⣿⡿⠛⢻⣿⣿⣿⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡆⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⣿⣿⣿⣿⣶⣤⣀⣉⣁⠈⠠⣤⣶⣿⣿⣿⣿⣷⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣹⣆⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠀⣿⣿⣿⣿⣿⣿⣿⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⡄⠀⢰⣿⣿⣧⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⣧⢹⣿⣿⣿⣆⢻⣿⣿⣿⣿⣿⠟⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⣾⣧⠀⣾⣿⣿⣿⣧⡀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠐⣿⣿⣿⣿⣿⣿⡈⢿⣿⣿⣿⣦⣙⠛⠛⢋⡁⠀⢀⠀⠀⠀⠀⠀⠀⠀⠀⣰⣿⣿⣿⣰⣿⣿⣿⣿⣿⣷⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣤⢀⣿⣿⣿⣿⣿⣿⡇⢸⣿⣿⣿⣿⣿⣿⣿⣿⣷⣿⣁⡀⠀⠀⠀⠀⣀⣴⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇
⠀⠀⠀⠀⠀⠀⠀⠀⠀⣴⣿⣿⢰⣿⣿⣿⣿⣿⣿⣿⢰⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣏⢡⣠⣤⣶⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇
⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿⣿⣿⡄⢽⣿⣿⣿⣿⣿⣿⢌⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠆⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠇
*/

import { EnsembleType, PerformancesFillStatus, PerformanceSortMethod, PerformancesSortOrder, SearchResultSort, SearchResultType } from "./smule-types"

export const BluestacksDevice = {
    "carrierCountry": "us",
    "country": "US",
    "deviceId": "a:198de726-8de9-4b60-858e-cef5abaf5a59",
    "deviceType": "AND",
    "googlePlayServices": "21.26.21 (100800-387928701)",
    "hasMail": true,
    "lang": "en",
    "limitAdTrack": false,
    "locale": "en_US",
    "machine": "SM-S908E",
    "manufacturer": "samsung",
    "os": "9",
    "product": "b0qxxx",
    "screenSize": "large",
    "script": ""
}
export const LoginCommon = {
    "advId": "2662dd3a-5cf2-4eae-9329-ce1849f43f6f",
    "device": BluestacksDevice,
    "automaticLogin": true,
    "playerId": 2674240701,
    "reactivateSubmittedAccount": false,
    "tzOffset": 7200,
    "vorgom": false,
    "welcome": false
}

//* Requests
export class LoginRefreshRequest {
    // Straight up copypasted from bluestacks
    private obj = {
        "common": LoginCommon,
        "refreshToken": "r2__DNdEgYu3HGGEb9qB6x6wjVZWrqi5vf0XnMmL6dU2Zta7dNsbYBLu0C7x/CAITgUwM7JCYDdA1pJG8z0tlDJ1fwBwSYaeT1A0mm6LnG5bgpj4dMHKc6kkkeXWnuhLpOSC68PgnQs5WZA3R5wmeY4gXw6JUWcN8hfivoiQig=="
    }
    constructor(refreshToken: string) {
        this.obj.refreshToken = refreshToken
    }
    toJSON() {
        return this.obj
    }
}
export class ListEntitlementsRequest { 
    toJSON() {return {}}
}
export class SettingsRequest {
    // while yes i could manually feed it the settings strings,
    // theres no real reason why i shouldnt just list them all lol
    toJSON() {
        return {
            "device": BluestacksDevice,
            "settingsIds": [
              "sing_google.subscriptions",
              "sing_google.stream_values",
              "sing_google.user_messages",
              "sing_google.buy_msg",
              "sing_google.tutorial",
              "sing_google.get_more_credits",
              "sing_google.cccp",
              "sing_google.songbook",
              "sing_google.preSing",
              "sing_google.ftuxBlocking",
              "sing_google.songUpsell",
              "sing_google.explore",
              "sing_google.mediaPlayer",
              "sing_google.ads",
              "sing_google.smeaks",
              "sing.profile",
              "sing.playlists",
              "sing.audio",
              "sing.audioFilters",
              "sing.arr",
              "sing.suggestions",
              "sing.onboarding",
              "sing.cccp",
              "sing.acappella",
              "sing.video",
              "sing.videoEncoding",
              "sing.chat",
              "sing.search",
              "sing.videoFX",
              "sing.videoStyles",
              "sing.avqSurvey",
              "sing.paywall",
              "sing_google.subscriptions",
              "sing.freeform",
              "dfp",
              "appLaunch",
              "sing.crm",
              "sing.boost",
              "sing.share",
              "sing.feed",
              "sing.findFriendsModule",
              "sing.localization",
              "sing.seeds",
              "sing.nowPlaying",
              "sing.registration",
              "sing.upload",
              "sing.families",
              "sing.appSettings",
              "campfire.avStreamQuality",
              "campfire.config",
              "sing.virtualCurrency",
              "campfire.audioFilters",
              "links",
              "sing.singingFlow",
              "sing.explore",
              "sing.songbookUsability",
              "sing.templates",
              "sing.notifications",
              "sing.topics",
              "sing.banners",
              "sing.shortJoins",
              "sing.vcs",
              "sing.notifications",
              "sing.customPitchMarker",
              "sing.tipping",
              "appFamily"
            ]
        }
    }
}
export class LoginInfoRequest {
    // see SettingsRequest::toJSON for explanation
    toJSON() {
        return {
            "reqInfo": [
              "notificationCount",
              "feedActivity",
              "performanceCount",
              "apiHosts"
            ]
          }
    }
}
export class DeviceSetRequest {
    toJSON() {
        return {
            device: BluestacksDevice
        }
    }
}
export class AccessTokenRequest {
    toJSON() {
        return {
            device: BluestacksDevice,
            "targetSystem": "IRIS" // No idea?
        }
    }
}
export class FolloweeRequest {
    private accountId = "2674243199"
    constructor(accountId: string|number) {
        this.accountId = accountId + ""
    }
    toJSON() {
        return {
            accountId: this.accountId
        }
    }
}
export class SongbookRequest {
    private data = {
        cat1SongsCursor: "start",
        cat1SongsLimit: 10
    }
    constructor(cursor = "start", limit = 10) {
        this.data.cat1SongsCursor = cursor
        this.data.cat1SongsLimit = limit
    }
    toJSON() {
        return this.data
    }
}
export class PreferancesRequest {
    toJSON() {
        return {
            names: [
                "SPARK_PUSH_DISABLE",
                "SPARK_READRECEIPT_DISABLE",
                "CHAT_STATE_DISABLE"
            ]
        }
    }
}
export class CategorySongsRequest {
    private data = {
        cursor: "start",
        limit: 10,
        id: 9998,
        duetAccountId: undefined
    }
    constructor(cursor = "start", limit = 10, categoryId = 9998, duetAccountId?: number) {
        this.data.cursor = cursor
        this.data.limit = limit
        this.data.id = categoryId
        if (duetAccountId) this.data.duetAccountId = duetAccountId
    }
    toJSON() {
        return this.data
    }
}
export class UsersLookupRequest {
    private data = {
        accountIds: []
    }
    constructor(accountIds: Array<number> = []) {
        this.data.accountIds = accountIds
    }
    toJSON() {
        return this.data
    }
}
export class PerformanceByKeysRequest {
    private data = {
        performanceKeys: []
    }
    constructor(performanceKeys: Array<string> = []) {
        this.data.performanceKeys = performanceKeys
    }
    toJSON() {
        return this.data
    }
}
export class PerformancesByUserRequest {
    private data = {
        "accountId": 0,
        "app": "sing_google",
        "collapsed": true,
        "fillStatus": "FILLED",
        "limit": 20,
        "offset": 0,
        "sortMethod": "NEWEST_FIRST"
    }
    constructor(accountId: number, limit = 20, offset = 0) {
        this.data.accountId = accountId
        this.data.limit = limit
        this.data.offset = offset
    }
    toJSON() { 
        return this.data
    }
}
export class LoginAsGuestRequest {
    toJSON() {
        return {
            common: LoginCommon,
            forceNewPlayer: true,
            lookupAccount: true,
            settingsIds: [
                "sing_google.subscriptions",
                "sing_google.stream_values",
                "sing_google.user_messages",
                "sing_google.buy_msg",
                "sing_google.tutorial",
                "sing_google.get_more_credits",
                "sing_google.cccp",
                "sing_google.songbook",
                "sing_google.preSing",
                "sing_google.ftuxBlocking",
                "sing_google.songUpsell",
                "sing_google.explore",
                "sing_google.mediaPlayer",
                "sing_google.ads",
                "sing_google.smeaks",
                "sing.profile",
                "sing.playlists",
                "sing.audio",
                "sing.audioFilters",
                "sing.arr",
                "sing.suggestions",
                "sing.onboarding",
                "sing.cccp",
                "sing.acappella",
                "sing.video",
                "sing.videoEncoding",
                "sing.chat",
                "sing.search",
                "sing.videoFX",
                "sing.videoStyles",
                "sing.avqSurvey",
                "sing.paywall",
                "sing_google.subscriptions",
                "sing.freeform",
                "dfp",
                "appLaunch",
                "sing.crm",
                "sing.boost",
                "sing.share",
                "sing.feed",
                "sing.findFriendsModule",
                "sing.localization",
                "sing.seeds",
                "sing.nowPlaying",
                "sing.registration",
                "sing.upload",
                "sing.families",
                "sing.appSettings",
                "campfire.avStreamQuality",
                "campfire.config",
                "sing.virtualCurrency",
                "campfire.audioFilters",
                "links",
                "sing.singingFlow",
                "sing.explore",
                "sing.songbookUsability",
                "sing.templates",
                "sing.notifications",
                "sing.topics",
                "sing.banners",
                "sing.shortJoins",
                "sing.vcs",
                "sing.notifications",
                "sing.customPitchMarker",
                "sing.tipping"
            ]
        }
    }
}
export class LoginRequest {
    private data = {
        ...LoginCommon,
        email: "",
        password: ""
    }
    constructor(email: string, password: string) {
        this.data.email = email
        this.data.password = password
    }

    toJSON() {
        return this.data
    }
}
export class PerformancesListRequest {
    private data = {
        "fillStatus": "ACTIVESEED",
        "limit": 25,
        "offset": 0,
        "sort": "SUGGESTED",
        "video": false
    }
    constructor(sort = PerformancesSortOrder.SUGGESTED, fillStatus = PerformancesFillStatus.ACTIVESEED, limit = 25, offset = 0) {
        this.data.fillStatus = fillStatus
        this.data.limit = limit
        this.data.offset = offset
        this.data.sort = sort
    }

    toJSON() {
        return this.data
    }
}
export class AutocompleteRequest {
    private data = {
        limit: 5,
        term: ""
    }
    constructor (term: string, limit: number) {
        this.data.limit = limit
        this.data.term = term
    }
    toJSON() {
        return this.data
    }
}
export class SearchRequest {
    private data = {
        "cursor": "start",
        "limit": 25,
        "resultType": "RECORDING",
        "sort": "RECENT",
        "term": "i deserve this"
    }
    constructor(cursor = "start", limit = 25, resultType: SearchResultType = "SONG", sort: SearchResultSort = "POPULAR", term = "") {
        this.data.cursor = cursor
        this.data.limit = limit
        this.data.resultType = resultType
        this.data.sort = sort
        this.data.term = term
    }
    toJSON() {
        return this.data
    }
}
export class ProfileRequest {
    private data = {
        accountId: 0,
        includeActiveState: true
    }
    constructor(accountId: number) {
        this.data.accountId = accountId
    }
    toJSON() {
        return this.data
    }
}
export class PerformancePartsRequest {
    private data = {
        "accountId": 0,
        "app": "sing_google",
        "collapsed": true,
        "fillStatus": "FILLED",
        "limit": 20,
        "offset": 0,
        "sortMethod": "NEWEST_FIRST"
    }
    constructor(accountId: number, fillStatus: PerformancesFillStatus, sortMethod: PerformanceSortMethod, limit = 20, offset = 0) {
        this.data.accountId = accountId
        this.data.fillStatus = fillStatus
        this.data.sortMethod = sortMethod
        this.data.limit = limit
        this.data.offset = offset
    }
    toJSON() {
        return this.data
    }
}
export class IsFollowingRequest {
    private data = {
        accountIds: [],
        apps: ["sing_google"]
    }
    constructor(accountIds: number[]) {
        this.data.accountIds = accountIds
    }
    toJSON() {
        return this.data
    }
}
export class UpdateFollowingRequest {
    private data = {
        add: [],
        content: "APP",
        remove: []
    }
    constructor(accountIdsToAdd: number[], accountIdsToRemove: number[]) {
        this.data.add = accountIdsToAdd
        this.data.remove = accountIdsToRemove
    }
    toJSON() {
        return this.data
    }
}
export class AvTemplateCategoryListRequest {
    private data = {
        "category": "AUDIO",
        "cursor": "start",
        "limit": 25,
        "avTemplateType": "STANDARD"
    }
    constructor(category = "AUDIO", cursor = "start", limit = 25, avTemplateType = "STANDARD") {
        this.data.category = category
        this.data.cursor = cursor
        this.data.limit = limit
        this.data.avTemplateType = avTemplateType
    }
    toJSON() {
        return this.data
    }
}
export class PreuploadRequest {
    private data = {
        "arrKey": "16827545_16827545",
        "compType": "ARR",
        "ensembleType": "SOLO",
        "trackVideo": false,
        "uploadType": "CREATE",
        seedKey: undefined
    }
    constructor(arrKey: string, compType: "ARR"|string, ensembleType: EnsembleType, uploadType = "CREATE", trackVideo = false, seedKey?: string) {
        this.data.arrKey = arrKey
        this.data.compType = compType
        this.data.ensembleType = ensembleType
        this.data.trackVideo = trackVideo
        this.data.uploadType = uploadType
        this.data.seedKey = seedKey
    }
    toJSON() {
        return this.data
    }
}

export class PerformanceCreateRequest {
    arrKey: string|undefined = undefined
    arrVer: number = 2
    audioResourceId: number;
    avTemplateId: number = 652900
    compType: "ARR"|string = "ARR"
    coverResourceId: number;
    ensembleType: EnsembleType = "SOLO";
    isPrivate: boolean = true
    latitude: number = 37
    longitude: number = -120
    message: string;
    metadataResourceId: number;
    seconds: number = 0
    title: string;
    trackAvTemplateId: number = 306890
    trackFxMode: string = "ALYCE"
    trackOptions: string = "{\"score\":0,\"afx_ver\":0,\"gain\":-0.11999998986721039}"
    trackVideo: boolean = false
    usedHeadphone: boolean = true
    vfactor: number = 0
    vscore: number = 0
    trackPartId: number|undefined = undefined
    savedEarly: boolean = false
    performanceKey: string|undefined = undefined

    constructor(
        arrKey: string,        
        ensembleType: EnsembleType = "SOLO",
        avTemplateId: number = 652900,
        isPrivate: boolean = true,
        message: string,
        title: string,
        usedHeadphone: boolean = false,
        compType: "ARR"|string = "ARR",
        seconds: number = 0,
        trackPartId: number = 1,
        performanceKey: string|undefined = undefined,
        
        trackAvTemplateId: number = 306890,
        trackFxMode: string = "ALYCE",
        trackOptions: string = "{\"score\":0,\"afx_ver\":0,\"gain\":-0.11999998986721039}",
        trackVideo: boolean = false,
        vfactor: number = 0,
        vscore: number = 0
    ) {
        this.arrKey = arrKey
        this.avTemplateId = avTemplateId
        this.compType = compType
        this.isPrivate = isPrivate
        this.message = message
        this.seconds = seconds
        this.title = title
        this.trackAvTemplateId = trackAvTemplateId
        this.trackFxMode = trackFxMode
        this.trackOptions = trackOptions
        this.trackVideo = trackVideo
        this.usedHeadphone = usedHeadphone
        this.vfactor = vfactor
        this.vscore = vscore
        this.ensembleType = ensembleType
        this.performanceKey = performanceKey

        if (ensembleType != "SOLO") {
            this.trackPartId = trackPartId
        }
    }
}